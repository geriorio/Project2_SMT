<div class="login-container">
  <div class="login-card">
    <div class="logo-section">
      <h1>ğŸšš Truck Management</h1>
      <p>Please login to continue</p>
    </div>
    
    <form (ngSubmit)="onLogin()" class="login-form" *ngIf="!isLoading">
      <div class="form-group">
        <label for="username">Username</label>
        <input
          type="text"
          id="username"
          [(ngModel)]="username"
          name="username"
          placeholder="Enter your username"
          required
        />
      </div>
      
      <div class="form-group">
        <label for="password">Password</label>
        <input
          type="password"
          id="password"
          [(ngModel)]="password"
          name="password"
          placeholder="Enter your password"
          required
        />
      </div>
      
      <button type="submit" class="login-btn">Login with Location</button>
      
      <button type="button" class="location-check-btn" (click)="getLocationOnly()">
        ğŸ“ Check My Location Only
      </button>

      <!-- Demo Credentials -->
      <div class="demo-section">
        <p class="demo-title">Demo Credentials:</p>
        <div class="demo-buttons">
          <button type="button" class="demo-btn driver" (click)="fillDemoCredentials('driver')">
            ğŸ‘¤ Driver
          </button>
          <button type="button" class="demo-btn supervisor" (click)="fillDemoCredentials('supervisor')">
            ğŸ‘¨â€ğŸ’¼ Supervisor
          </button>
          <button type="button" class="demo-btn admin" (click)="fillDemoCredentials('admin')">
            ğŸ‘¨â€ğŸ’» Admin
          </button>
        </div>
      </div>
    </form>

    <!-- Loading State -->
    <div class="loading-section" *ngIf="isLoading">
      <div class="loading-spinner"></div>
      <p class="loading-text">{{ locationStatus }}</p>
    </div>

    <!-- Error Message from Query Params -->
    <div class="error-alert" *ngIf="!isLoading && !showLocationInfo">
      <!-- This section can be removed since we're simplifying -->
    </div>

    <!-- Location Information -->
    <div class="location-info" *ngIf="showLocationInfo && !isLoading">
      <div class="location-status success">
        <h3>ğŸ“ Location Information</h3>
        <p>{{ locationStatus }}</p>
      </div>

      <div class="location-details" *ngIf="userLocation">
        <h4>ğŸ“ Your Current Location</h4>
        <div class="coordinate-item">
          <label>Latitude:</label>
          <div class="coordinate-value">
            <span>{{ formatCoordinate(userLocation.latitude) }}</span>
            <button class="copy-btn" (click)="copyToClipboard(formatCoordinate(userLocation.latitude))">
              ğŸ“‹
            </button>
          </div>
        </div>
        
        <div class="coordinate-item">
          <label>Longitude:</label>
          <div class="coordinate-value">
            <span>{{ formatCoordinate(userLocation.longitude) }}</span>
            <button class="copy-btn" (click)="copyToClipboard(formatCoordinate(userLocation.longitude))">
              ğŸ“‹
            </button>
          </div>
        </div>

        <div class="coordinate-item">
          <label>Coordinates:</label>
          <div class="coordinate-value">
            <span>{{ formatCoordinate(userLocation.latitude) }}, {{ formatCoordinate(userLocation.longitude) }}</span>
            <button class="copy-btn" (click)="copyToClipboard(formatCoordinate(userLocation.latitude) + ', ' + formatCoordinate(userLocation.longitude))">
              ğŸ“‹
            </button>
          </div>
        </div>

        <div class="coordinate-item" *ngIf="userLocation.accuracy">
          <label>Accuracy:</label>
          <div class="coordinate-value">
            <span>{{ userLocation.accuracy.toFixed(0) }}m</span>
          </div>
        </div>
      </div>

      <div class="location-actions">
        <button class="btn-close" (click)="hideLocationInfo()">
          âœ– Close
        </button>
      </div>
    </div>

    <!-- Success Message -->
    <div class="success-message" *ngIf="locationStatus.includes('successfully') && isLoading">
      <h3>ğŸ‰ Location Detected!</h3>
      <p>Redirecting to dashboard...</p>
    </div>
  </div>
</div>
